<body>

  <canvas id="gameCanvas" width="6000" height="500">
  <script src="http://code.createjs.com/createjs-2013.09.25.min.js"></script>
   <script src="/socket.io/socket.io.js"></script>
    <script src="http://vkontakte.ru/js/api/xd_connection.js?2" type="text/javascript"></script>
   <script>
  

VK.init(function() {
  // API initialization succeeded
  console.log("api init ok");
  // Now we can call API functions via VK.api
  VK.api(
    "users.get", // Calling users.get API function
    {
      fields: "screen_name" // Function argument
    },
    function(data) // Callback - called when server-side API answers
    {
      console.log( data );
      name = data.response[0].screen_name;
    //  alert ("Hello!",name);
    }
  )
  
   VK.api("friends.get", {}, function(dataAllFriends) {
            // после получения списка друзей, выполняем запрос получения списка друзей установивших приложение
            VK.api("friends.getAppUsers", {}, function(dataAppUsers) {
                      // узнаем количество друзей
                    var frCount = dataAllFriends.response.length;
                    alert (frCount);
                    // количество установивших приложение
                    var appCount = dataAppUsers.response.length;
                     alert (appCount);
                    //alert(data.response[i].first_name);
                    // создаём массив друзей, которые  установили приложение
                     var noApp = dataAppUsers.response; // cначала записываем всех друзей в массив, дальше будем удалять из него установивших
     
                   
                 
                   
                    // теперь в массиве noApp храняться id друзей, которые не установили приложение
                    var noAppCount = noApp.length;
                     alert (noAppCount);
                    document.getElementById('uids_count').innerHTML = 'Количество друзей, установивших приложение: ' + noAppCount;
                   
                    // выведем ссылки на профили трех из этих пользователей
                    // смысл получать профили есть только если массив пользователей не пустой
                    if (noAppCount>0) {                
                        // если не установили приложение менее 4х друзей, то выведем только их
                       
                            // просто превращаем массив пользователей в строку
                            var noAppUids = noApp.join(',');
                     
                       
                       
                       
                        VK.api("getProfiles", {uids:noAppUids,fields:"photo_rec"}, function(data) {
                            // узнаем количество полученных профилей
                            var profilesCount = data.response.length;
                           
                            // в эту переменную запишем html код для вывода списка пользователей
                            var profilesStr = '';
                           
                            for (var i=0; i<profilesCount; i++) {
                                profilesStr += '<a href="/id' + data.response[i].uid + '" title="' + data.response[i].first_name + ' ' + data.response[i].last_name + '"><img width="150" height="150" src="' + data.response[i].photo_rec + '" /></a> ';
                            }
                            alert(profilesStr);
                            //document.getElementById('friends_list').innerHTML = profilesStr;
                           
                    //         // http://flapps.ru
                         });
                    }
            });
        });
  
})
// VK.init(function() {
//             VK.loadParams(document.location.href);
//           // var name = VK.params.lc_name;
//               // alert("Hello", name);
//         });
        
var socket = io.connect('http://batmanapp.herokuapp.com/');
socket.on('news', function (data) {
   console.log(data);
   socket.emit('my other event', { my: 'data' });
});

   
	var stage = new createjs.Stage("gameCanvas");

	//линия
	g = new createjs.Graphics()
              .beginStroke("#000000")
              .moveTo(8,9).lineTo(40,100);
	line = new createjs.Shape(g);
	stage.addChild(line);
	
	
	g  = new createjs.Graphics().beginFill("#FFEB70").drawRect(50, 60, 90, 30);
	bg = new createjs.Shape(g);
	stage.addChild(bg);
	
	//Graphics().beginFill("#FFEB70");
//Graphics().setStrokeStyle(6).beginStroke("#413D3D");

	//текст
	var txt = new createjs.Text("Hello world", "bold 48pt Courier New", "#000000");	
	txt.x = 20;
	txt.y = 100;
	stage.addChild(txt);
	
	
	//картинка
	
	var image =  new createjs.Bitmap("FC_Lokomotiv.png");
	image.x = 100;
image.y = 200	
	stage.addChild(image);

	
	
	image.addEventListener("click", hello);
var counts = 0;
function hello(event)
{
       alert(++counts);
}
	createjs.Ticker.addEventListener("tick",tick);

function tick()
{
//image.x = image.x + 10;
       // ваш код
	   //alert("tick");
       stage.update();
}
	</script>
  </canvas>
</body>